# Recharting the Weak Silent-Step Spectrum {#sec-weak-spectrum}

::: {.content-hidden when-format="pdf"}
{{< include style/macros.md >}}
:::

For practical problems, the equivalences we have discussed so far usually are *too strong*.
They notice where in a process the *internal action* $\tau$ happens, that is: 
$$\literal{a} \nbeq{} \ccsprefix{\tau} \literal{a} \nbeq{} \ccsprefix{\tau} \ccsprefix{\tau} \literal{a} \nbeq{} \ccsprefix{\tau}\ccsprefix{\literal{a}} \tau  \nbeq{} \ccsprefix{\literal{a}} \tau$$

For real-world models, we want equivalences to disregard such kinds of internal behavior as “silent”  when comparing processes, such that:

$$\literal{a} \beq{} \ccsprefix{\tau} \literal{a} \beq{} \ccsprefix{\tau} \ccsprefix{\tau} \literal{a} \beq{} \ccsprefix{\tau}\ccsprefix{\literal{a}} \tau  \beq{} \ccsprefix{\literal{a}} \tau$$

Equivalences with this feature are called *weak*, alluding to the fact that they are less distinctive than the “strong” equivalences that treat $\tau$ like any other action.

The basic principle is that weak equivalences should maintain that some internal behavior happening before or after a visible action does not make a difference from the point of view of an observer.
But this idea leads into a lot of fine points.

## Weak Equivalences in General

### Silent Transitions {#sec-silent-transitions}


:::{#def-transition-systems-with-silent-steps}

For transition systems $\system=(\states,\actions,\step{})$ with a silent action $\tau \in \actions$, we define special transition relations and HML modalities:

Internal transition relation
: $p \stepweak p'$ iff $p \step{\tau}^* p'$, where $\step{\tau}^*$ is the reflexive transitive closure of silent steps.
: The *internal* modality $\hmleps \varphi$ has $p \in \semantics{\hmleps\varphi}$ iff there is $p' \in \semantics{\varphi}$ with $p \stepweak p'$.

Optional transition relation
: $p \stepopt{\alpha} p'$ iff $p \step{\alpha} p'$, or if $\alpha = \tau$ and $p = p'$.
: We accompany it by the *optional* step modality $\hmlopt{\alpha} \varphi$ with $p \in \semantics{\hmlopt{\alpha}\varphi}$ iff there is $p' \in \semantics{\varphi}$ with $p \stepopt{\alpha} p'$.

Stable process
: A process $p$ is called *stable* iff $p \nostep{\tau}$.
: (In HML, we can use $\hmlneg\hmlobs{\tau}\hmltrue$ to express stabilization.)

Again, we implicitly lift the relations to sets of processes, that is for instance, $P \stepweak P'$ (with $P, P' \subseteq \states$) iff $P' = \set{ p' \in \states \mid \exists p \in P \ldotp p \stepweak p'}$.

:::

### Weak Traces and Weak Bisimulation

- Weak transition relation
- Weak traces
- Weak bisim

### The Need for Other Equivalences

- Weak failures
- Stability...

## Case Studies

### Peterson's Mutual Exclusion

### Bell's Parellelizing Compiler Optimization

### Congruence-Properties of Abstraction

... Closing hint: congruence even messier in the weak spectrum, e.g. weak bisim not congruence for +.

## Expressing the Weak Spectrum with Quantities

### Special Weak Equivalences

### HML with Silent Behavior



## Discussion

